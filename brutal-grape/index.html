<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Brutal Grape üçá</title>
	<link rel="stylesheet" href="./stylo.css">
</head>

<body>
	<section>
		<header>Grape</header>
		<main>
			<ul>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
				<li>Billy Barman</li>
				<li>Barman Billy</li>
			</ul>
		</main>
	</section>
</body>


<script>
	const elements = [...document.querySelectorAll('li')];
	const style = getComputedStyle(document.body);

	const ARTIST_HEIGHT = style.getPropertyValue('--artist-height');
	const OFFSET = 50 - ARTIST_HEIGHT / 5;
	const CSS_CLASS = 'viewport';
	const CONFIG = {
		rootMargin: `-${OFFSET}% 0px -${OFFSET}% 0px`
	};

	function onIntersection(entries) {
		entries.forEach((entry, index) => {
			const {
				intersectionRatio,
				target
			} = entry;

			if (entry.isIntersecting) {
				target.classList.add(CSS_CLASS);
			} else {
				target.classList.remove(CSS_CLASS);
			}
		});
	}

	let observer = new IntersectionObserver(onIntersection, CONFIG);
	elements.forEach(ele => observer.observe(ele));
</script>

</html>